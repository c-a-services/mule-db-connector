<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:db="http://www.mulesoft.org/schema/mule/db" xmlns="http://www.mulesoft.org/schema/mule/core"
      xmlns:spring="http://www.mulesoft.org/schema/mule/spring"
      xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/db http://www.mulesoft.org/schema/mule/db/current/mule-db.xsd
http://www.mulesoft.org/schema/mule/spring http://www.mulesoft.org/schema/mule/spring/current/mule-spring.xsd">

    <spring:config name="Spring_Config" doc:name="Spring Config" doc:id="dfe4c7e3-e772-4df4-8738-42e3f06cd046" files="integration/config/mssql-xa-config.xml" />

    <db:config name="MSSQL_CONFIG_XA" doc:name="Database Config" doc:id="7bfe2bd7-03a0-4719-91c1-d1ed40f78078" >
        <db:mssql-connection host="0.0.0.0" port="1433" user="sa" password="yourStrong(!)Password" useXaTransactions="true">
            <reconnection >
                <reconnect-forever frequency="500" />
            </reconnection>
            <db:pooling-profile/>
        </db:mssql-connection>
    </db:config>

<!--    COMMENTED OUT DUE TO XA ISSUES WITH SQL SERVER DRIVER-->
<!--    <db:config name="MSSQL_CONFIG_XA_UNSTABLE" doc:name="Database Config"  doc:id="fd783e14-c0da-4cdb-97df-3c09047b915a" >-->
<!--        <db:data-source-connection dataSourceRef="bitronixDataSource2" >-->
<!--            <reconnection >-->
<!--                <reconnect-forever frequency="500" />-->
<!--            </reconnection>-->
<!--            <db:pooling-profile />-->
<!--        </db:data-source-connection>-->
<!--    </db:config>-->

    <db:config name="MSSQL_CONFIG_XA_UNSTABLE" doc:name="Database Config" doc:id="f7f84727-15d3-40f0-a8b0-178ed0fded9a" >
        <db:mssql-connection host="0.0.0.0" port="${connection.lost.port}" user="sa" password="yourStrong(!)Password" useXaTransactions="true">
            <reconnection >
                <reconnect-forever frequency="500" />
            </reconnection>
            <db:pooling-profile/>
        </db:mssql-connection>
    </db:config>

    <db:config name="MSSQL_CONFIG_UNSTABLE" doc:name="Database Config" doc:id="f7f84727-15d3-40f0-a8b0-178ed0fded9a" >
        <db:mssql-connection host="0.0.0.0" port="${connection.lost.port}" user="sa" password="yourStrong(!)Password" >
            <reconnection >
                <reconnect-forever frequency="500" />
            </reconnection>
            <db:pooling-profile/>
        </db:mssql-connection>
    </db:config>
</mule>
